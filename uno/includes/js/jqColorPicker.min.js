/*! tinyColorPicker - v1.0.0 2015-09-06 - http://dematte.at/tinyColorPicker - Mod only HEX or RGBA */
!function(r,t){"use strict";function o(r,o,e,n,s){if("string"==typeof o){var o=m.txt2color(o);e=o.type,p[e]=o[e],s=s!==t?s:o.alpha}else if(o)for(var a in o)r[e][a]=u(o[a]/h[e][a][1],0,1);return s!==t&&(r.alpha=u(+s,0,1)),i(e,n?r:t)}function e(r,t,o){var e=g.options.grey,i={};return i.RGB={r:r.r,g:r.g,b:r.b},i.rgb={r:t.r,g:t.g,b:t.b},i.alpha=o,i.equivalentGrey=Math.round(e.r*r.r+e.g*r.g+e.b*r.b),i.rgbaMixBlack=c(t,{r:0,g:0,b:0},o,1),i.rgbaMixWhite=c(t,{r:1,g:1,b:1},o,1),i.rgbaMixBlack.luminance=a(i.rgbaMixBlack,!0),i.rgbaMixWhite.luminance=a(i.rgbaMixWhite,!0),g.options.customBG&&(i.rgbaMixCustom=c(t,g.options.customBG,o,1),i.rgbaMixCustom.luminance=a(i.rgbaMixCustom,!0),g.options.customBG.luminance=a(g.options.customBG,!0)),i}function i(r,t){var o,i,u,d=t||p,b=m,f=g.options,v=h,x=d.RND,w="",_="",y={hsl:"hsv",rgb:r},M=x.rgb;if("alpha"!==r){for(var C in v)if(!v[C][C]){r!==C&&(_=y[C]||"rgb",d[C]=b[_+"2"+C](d[_])),x[C]||(x[C]={}),o=d[C];for(w in o)x[C][w]=Math.round(o[w]*v[C][w][1])}M=x.rgb,d.HEX=b.RGB2HEX(M),d.equivalentGrey=f.grey.r*d.rgb.r+f.grey.g*d.rgb.g+f.grey.b*d.rgb.b,d.webSave=i=n(M,51),d.webSmart=u=n(M,17),d.saveColor=M.r===i.r&&M.g===i.g&&M.b===i.b?"web save":M.r===u.r&&M.g===u.g&&M.b===u.b?"web smart":"",d.hueRGB=m.hue2RGB(d.hsv.h),t&&(d.background=e(M,d.rgb,d.alpha))}var k,B,G,R=d.rgb,E=d.alpha,z="luminance",H=d.background;return k=c(R,{r:0,g:0,b:0},E,1),k[z]=a(k,!0),d.rgbaMixBlack=k,B=c(R,{r:1,g:1,b:1},E,1),B[z]=a(B,!0),d.rgbaMixWhite=B,f.customBG&&(G=c(R,H.rgbaMixCustom,E,1),G[z]=a(G,!0),G.WCAG2Ratio=l(G[z],H.rgbaMixCustom[z]),d.rgbaMixBGMixCustom=G,G.luminanceDelta=Math.abs(G[z]-H.rgbaMixCustom[z]),G.hueDelta=s(H.rgbaMixCustom,G,!0)),d.RGBLuminance=a(M),d.HUELuminance=a(d.hueRGB),f.convertCallback&&f.convertCallback(d,r),d}function n(r,t){var o={},e=0,i=t/2;for(var n in r)e=r[n]%t,o[n]=r[n]+(e>i?t-e:-e);return o}function s(r,t,o){return(Math.max(r.r-t.r,t.r-r.r)+Math.max(r.g-t.g,t.g-r.g)+Math.max(r.b-t.b,t.b-r.b))*(o?255:1)/765}function a(r,t){for(var o=t?1:255,e=[r.r/o,r.g/o,r.b/o],i=g.options.luminance,n=e.length;n--;)e[n]=e[n]<=.03928?e[n]/12.92:Math.pow((e[n]+.055)/1.055,2.4);return i.r*e[0]+i.g*e[1]+i.b*e[2]}function c(r,o,e,i){var n={},s=e!==t?e:1,a=i!==t?i:1,c=s+a*(1-s);for(var l in r)n[l]=(r[l]*s+o[l]*a*(1-s))/c;return n.a=c,n}function l(r,t){var o=1;return o=r>=t?(r+.05)/(t+.05):(t+.05)/(r+.05),Math.round(100*o)/100}function u(r,t,o){return r>o?o:t>r?t:r}var h={rgb:{r:[0,255],g:[0,255],b:[0,255]},hsv:{h:[0,360],s:[0,100],v:[0,100]},hsl:{h:[0,360],s:[0,100],l:[0,100]},alpha:{alpha:[0,1]},HEX:{HEX:[0,16777215]}},g={},p={},d={r:.298954,g:.586434,b:.114612},b={r:.2126,g:.7152,b:.0722},f=r.Colors=function(r){this.colors={RND:{}},this.options={color:"rgba(204, 82, 37, 0.8)",grey:d,luminance:b,valueRanges:h},v(this,r||{})},v=function(r,e){var i,n=r.options;x(r);for(var s in e)e[s]!==t&&(n[s]=e[s]);i=n.customBG,n.customBG="string"==typeof i?m.txt2color(i).rgb:i,p=o(r.colors,n.color,t,!0)},x=function(r){g!==r&&(g=r,p=r.colors)};f.prototype.setColor=function(r,e,n){return x(this),r?o(this.colors,r,e,t,n):(n!==t&&(this.colors.alpha=u(n,0,1)),i(e))},f.prototype.setCustomBackground=function(r){return x(this),this.options.customBG="string"==typeof r?m.txt2color(r).rgb:r,o(this.colors,t,"rgb")},f.prototype.saveAsBackground=function(){return x(this),o(this.colors,t,"rgb",!0)};var m={txt2color:function(r){var t={},o=r.replace(/(?:#|\)|%)/g,"").split("("),e=(o[1]||"").split(/,\s*/),i=o[1]?o[0].substr(0,3):"rgb",n="";if(t.type=i,t[i]={},o[1])for(var s=3;s--;)n=i[s]||i.charAt(s),t[i][n]=+e[s]/h[i][n][1];else t.rgb=m.HEX2rgb(o[0]);return t.alpha=e[3]?+e[3]:1,t},RGB2HEX:function(r){return((r.r<16?"0":"")+r.r.toString(16)+(r.g<16?"0":"")+r.g.toString(16)+(r.b<16?"0":"")+r.b.toString(16)).toUpperCase()},HEX2rgb:function(r){return r=r.split(""),{r:parseInt(r[0]+r[r[3]?1:0],16)/255,g:parseInt(r[r[3]?2:1]+(r[3]||r[1]),16)/255,b:parseInt((r[4]||r[2])+(r[5]||r[2]),16)/255}},hue2RGB:function(r){var t=6*r,o=~~t%6,e=6===t?0:t-o;return{r:Math.round(255*[1,1-e,0,0,e,1][o]),g:Math.round(255*[e,1,1,1-e,0,0][o]),b:Math.round(255*[0,0,e,1,1,1-e][o])}},rgb2hsv:function(r){var t,o,e,i=r.r,n=r.g,s=r.b,a=0;return s>n&&(n=s+(s=n,0),a=-1),o=s,n>i&&(i=n+(n=i,0),a=-2/6-a,o=Math.min(n,s)),t=i-o,e=i?t/i:0,{h:1e-15>e?p&&p.hsl&&p.hsl.h||0:t?Math.abs(a+(n-s)/(6*t)):0,s:i?t/i:p&&p.hsv&&p.hsv.s||0,v:i}},hsv2rgb:function(r){var t=6*r.h,o=r.s,e=r.v,i=~~t,n=t-i,s=e*(1-o),a=e*(1-n*o),c=e*(1-(1-n)*o),l=i%6;return{r:[e,a,s,s,c,e][l],g:[c,e,e,a,s,s][l],b:[s,s,c,e,e,a][l]}},hsv2hsl:function(r){var t=(2-r.s)*r.v,o=r.s*r.v;return o=r.s?1>t?t?o/t:0:o/(2-t):0,{h:r.h,s:r.v||o?o:p&&p.hsl&&p.hsl.s||0,l:t/2}},rgb2hsl:function(r,t){var o=m.rgb2hsv(r);return m.hsv2hsl(t?o:p.hsv=o)},hsl2rgb:function(r){var t=6*r.h,o=r.s,e=r.l,i=.5>e?e*(1+o):e+o-o*e,n=e+e-i,s=i?(i-n)/i:0,a=~~t,c=t-a,l=i*s*c,u=n+l,h=i-l,g=a%6;return{r:[i,h,n,n,u,i][g],g:[u,i,i,h,n,n][g],b:[n,n,u,i,i,h][g]}}}}(window),function(r,t,o){"use strict";function e(t){return t.value||t.getAttribute("value")||r(t).css("background-color")||"#fff"}function i(r){return r=r.originalEvent&&r.originalEvent.touches?r.originalEvent.touches[0]:r,r.originalEvent?r.originalEvent:r}function n(t){return r(t.find(v.doRender)[0]||t[0])}function s(t){var o=r(this),i=o.offset(),s=r(window),c=v.gap;t?(x=n(o),b.$trigger=o,(m||a()).css({left:(m[0]._left=i.left)-((m[0]._left=m[0]._left+m[0]._width-(s.scrollLeft()+s.width()))+c>0?m[0]._left+c:0),top:(m[0]._top=i.top+o.outerHeight())-((m[0]._top=m[0]._top+m[0]._height-(s.scrollTop()+s.height()))+c>0?m[0]._top+c:0)}).show(v.animationSpeed,function(){t!==!0&&(M._width=M.width(),w._width=w.width(),w._height=w.height(),f.setColor(e(x[0])),g(!0))})):r(m).hide(v.animationSpeed,function(){x.blur(),b.$trigger=null,g(!1)})}function a(){return r("head").append('<style type="text/css">'+(v.css||X)+(v.cssAddon||"")+"</style>"),b.$UI=m=r(F).css({margin:v.margin}).appendTo("body").show(0,function(){var t=r(this);z=v.GPU&&t.css("perspective")!==o,w=r(".cp-xy-slider",this),_=r(".cp-xy-cursor",this),y=r(".cp-z-cursor",this),M=r(".cp-alpha",this).toggle(!!v.opacity),C=r(".cp-alpha-cursor",this),v.buildCallback.call(b,t),t.prepend("<div>").children().eq(0).css("width",t.children().eq(0).width()),this._width=this.offsetWidth,this._height=this.offsetHeight}).hide().on(R,".cp-xy-slider,.cp-z-slider,.cp-alpha",c)}function c(t){var o=this.className.replace(/cp-(.*?)(?:\s*|$)/,"$1").replace("-","_");t.preventDefault&&t.preventDefault(),t.returnValue=!1,x._offset=r(this).offset(),(o="xy_slider"===o?l:"z_slider"===o?u:h)(t),g(),k.on(E,function(){k.off(".a")}).on(G,function(r){o(r),g()})}function l(r){var t=i(r),o=t.pageX-x._offset.left,e=t.pageY-x._offset.top;f.setColor({s:o/w._width*100,v:100-e/w._height*100},"hsv")}function u(r){var t=i(r).pageY-x._offset.top;f.setColor({h:360-t/w._height*360},"hsv")}function h(r){var t=i(r).pageX-x._offset.left,o=t/M._width;f.setColor({},"rgb",o)}function g(r){var t=f.colors,e=t.hueRGB,i=t.RND.rgb,n=(t.RND.hsl,"#222"),s="#ddd",a=(x.data("colorMode"),1!==t.alpha),c=Math.round(100*t.alpha)/100,l=i.r+", "+i.g+", "+i.b,u=a?"rgba("+l+", "+c+")":"#"+t.HEX,h=t.HUELuminance>.22?n:s,g=t.rgbaMixBlack.luminance>.22?n:s,d=(1-t.hsv.h)*w._height,b=t.hsv.s*w._width,v=(1-t.hsv.v)*w._height,m=c*M._width,k=z?"translate3d":"",B=x.val(),G=x[0].hasAttribute("value")&&""===B&&r!==o;w._css={backgroundColor:"rgb("+e.r+","+e.g+","+e.b+")"},_._css={transform:k+"("+b+"px, "+v+"px, 0)",left:z?"":b,top:z?"":v,borderColor:t.RGBLuminance>.22?n:s},y._css={transform:k+"(0, "+d+"px, 0)",top:z?"":d,borderColor:"transparent "+h},M._css={backgroundColor:"rgb("+l+")"},C._css={transform:k+"("+m+"px, 0, 0)",left:z?"":m,borderColor:g+" transparent"},x._css={backgroundColor:G?"":u,color:G?"":t.rgbaMixBGMixCustom.luminance>.22?n:s},x.text=G?"":B!==u?u:"",r!==o?p(r):H(p)}function p(r){w.css(w._css),_.css(_._css),y.css(y._css),M.css(M._css),C.css(C._css),v.doRender&&x.css(x._css),x.text&&x.val(x.text),v.renderCallback.call(b,x,"boolean"==typeof r?r:o)}var d,b,f,v,x,m,w,_,y,M,C,k=r(document),B="",G="touchmove.a mousemove.a pointermove.a",R="touchstart.a mousedown.a pointerdown.a",E="touchend.a mouseup.a pointerup.a",z=!1,H=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(r){r()},F='<div class="cp-color-picker"><div class="cp-z-slider"><div class="cp-z-cursor"></div></div><div class="cp-xy-slider"><div class="cp-white"></div><div class="cp-xy-cursor"></div></div><div class="cp-alpha"><div class="cp-alpha-cursor"></div></div></div>',X=".cp-color-picker{position:absolute;overflow:hidden;padding:6px 6px 0;background-color:#444;color:#bbb;font-family:Arial,Helvetica,sans-serif;font-size:12px;font-weight:400;cursor:default;border-radius:5px}.cp-color-picker>div{position:relative;overflow:hidden}.cp-xy-slider{float:left;height:128px;width:128px;margin-bottom:6px;background:linear-gradient(to right,#FFF,rgba(255,255,255,0))}.cp-white{height:100%;width:100%;background:linear-gradient(rgba(0,0,0,0),#000)}.cp-xy-cursor{position:absolute;top:0;width:10px;height:10px;margin:-5px;border:1px solid #fff;border-radius:100%;box-sizing:border-box}.cp-z-slider{float:right;margin-left:6px;height:128px;width:20px;background:linear-gradient(red 0,#f0f 17%,#00f 33%,#0ff 50%,#0f0 67%,#ff0 83%,red 100%)}.cp-z-cursor{position:absolute;margin-top:-4px;width:100%;border:4px solid #fff;border-color:transparent #fff;box-sizing:border-box}.cp-alpha{clear:both;width:100%;height:16px;margin:6px 0;background:linear-gradient(to right,#444,rgba(0,0,0,0))}.cp-alpha-cursor{position:absolute;margin-left:-4px;height:100%;border:4px solid #fff;border-color:#fff transparent;box-sizing:border-box}",A=function(r){f=this.color=new t(r),v=f.options};A.prototype={render:g,toggle:s},r.fn.colorPicker=function(t){var o=function(){};return t=r.extend({animationSpeed:150,GPU:!0,doRender:!0,customBG:"#FFF",opacity:!0,renderCallback:o,buildCallback:o,body:document.body,scrollResize:!0,gap:4},t),!b&&t.scrollResize&&r(window).on("resize.a scroll.a",function(){b.$trigger&&b.toggle.call(b.$trigger[0],!0)}),d=d?d.add(this):this,d.colorPicker=b||(b=new A(t)),B+=(B?", ":"")+this.selector,r(t.body).off(".a").on(R,function(t){var o=r(t.target);-1!==r.inArray(o.closest(B)[0],d)||o.closest(m).length||s()}).on("focus.a click.a",B,s).on("change.a",B,function(){f.setColor(this.value||"#FFF"),d.colorPicker.render(!0)}),this.each(function(){var o=e(this),i=o.split("("),s=n(r(this));s.data("colorMode",i[1]?i[0].substr(0,3):"HEX").attr("readonly",v.preventFocus),t.doRender&&s.css({"background-color":o,color:function(){return f.setColor(o).rgbaMixBGMixCustom.luminance>.22?"#222":"#ddd"}})})},r.fn.colorPicker.destroy=function(){r(b.color.options.body).off(".a"),b.toggle(!1),d=null,B=""}}(jQuery,Colors);